<!DOCTYPE html>
<html>
<head>
	<title>Survey</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<style type="text/css">
		#about{
			border-bottom: 1px solid lightgrey;
			border-top: 1px solid lightgrey;
			margin-top: 30px;
			padding-bottom: 30px;
		}
		#subbutton{
			margin-top: 20px;
		}
		#surveyQs{
			margin-bottom: 10px;
			border-bottom: 1px solid lightgrey;
			padding-bottom: 20px;
		}
	</style>
</head>
<body>

	<div class="container">
	  <h1>Survey Questions</h1>
	  <div id="about">
		  <h2>About you</h2>
		  <form>
		    <div class="form-group">
		      <label for="usr">Name (Required)</label>
		      <input type="text" class="form-control" id="usrName" required>
		    </div>
		    <div class="form-group">
		      <label for="usrPhoto">Link to Photo Image (Required)</label>
		      <input type="text" class="form-control" id="usrPhoto" required>
		    </div>
		  </form>
	  </div>
	</div>

	<div id="surveyQs" class="container">
	  <form>
	    <div class="form-group">
	      <label for="q1"><h3><b>Question 1</b></h3><h4>You love a good party</h4></label>
	      <select class="form-control" id="q1">
	      	<option selected disabled hidden>Select one</option>
	        <option>1 (Strongly Disagree)</option>
	        <option>2</option>
	        <option>3</option>
	        <option>4</option>
	        <option>5 (Strongly Agree)</option>
	      </select>
	      <label for="q2"><h3><b>Question 2</b></h3><h4> You enjoy going to museums and cultural events</h4></label>
	      <select class="form-control" id="q2">
	      	<option selected disabled hidden>Select one</option>
	        <option>1 (Strongly Disagree)</option>
	        <option>2</option>
	        <option>3</option>
	        <option>4</option>
	        <option>5 (Strongly Agree)</option>
	      </select>
	      <label for="q3"><h3><b>Question 3</b></h3><h4>You like to talk about feelings and emotions</h4></label>
	      <select class="form-control" id="q3">
	      	<option selected disabled hidden>Select one</option>
	        <option>1 (Strongly Disagree)</option>
	        <option>2</option>
	        <option>3</option>
	        <option>4</option>
	        <option>5 (Strongly Agree)</option>
	      </select>
	      <label for="q4"><h3><b>Question 4</b></h3><h4>You like to keep to a schedule</h4></label>
	      <select class="form-control" id="q4">
	      	<option selected disabled hidden>Select one</option>
	        <option>1 (Strongly Disagree)</option>
	        <option>2</option>
	        <option>3</option>
	        <option>4</option>
	        <option>5 (Strongly Agree)</option>
	      </select>
	      <label for="q5"><h3><b>Question 5</b></h3><h4>You like a steady stream of conversation</h4></label>
	      <select class="form-control" id="q5">
	      	<option selected disabled hidden>Select one</option>
	        <option>1 (Strongly Disagree)</option>
	        <option>2</option>
	        <option>3</option>
	        <option>4</option>
	        <option>5 (Strongly Agree)</option>
	      </select>
	      <label for="q6"><h3><b>Question 6</b></h3><h4>You like to talk about intellectual things like art and philosophy</h4></label>
	      <select class="form-control" id="q6">
	      	<option selected disabled hidden>Select one</option>
	        <option>1 (Strongly Disagree)</option>
	        <option>2</option>
	        <option>3</option>
	        <option>4</option>
	        <option>5 (Strongly Agree)</option>
	      </select>
	      <label for="q7"><h3><b>Question 7</b></h3><h4>You are more logical than emotional</h4></label>
	      <select class="form-control" id="q7">
	      	<option selected disabled hidden>Select one</option>
	        <option>1 (Strongly Disagree)</option>
	        <option>2</option>
	        <option>3</option>
	        <option>4</option>
	        <option>5 (Strongly Agree)</option>
	      </select>
	      <label for="q8"><h3><b>Question 8</b></h3><h4>You keep a very clean house</h4></label>
	      <select class="form-control" id="q8">
	      	<option selected disabled hidden>Select one</option>
	        <option>1 (Strongly Disagree)</option>
	        <option>2</option>
	        <option>3</option>
	        <option>4</option>
	        <option>5 (Strongly Agree)</option>
	      </select>
	      <label for="q9"><h3><b>Question 9</b></h3><h4>You are a social butterfly</h4></label>
	      <select class="form-control" id="q9">
	      	<option selected disabled hidden>Select one</option>
	        <option>1 (Strongly Disagree)</option>
	        <option>2</option>
	        <option>3</option>
	        <option>4</option>
	        <option>5 (Strongly Agree)</option>
	      </select>
	      <label for="q10"><h3><b>Question 10</b></h3><h4>You love to travel to exotic places</h4></label>
	      <select class="form-control" id="q10">
	      	<option selected disabled hidden>Select one</option>
	        <option>1 (Strongly Disagree)</option>
	        <option>2</option>
	        <option>3</option>
	        <option>4</option>
	        <option>5 (Strongly Agree)</option>
	      </select>
	      <button id="subbutton" type="submit" class="btn btn-primary btn-lg btn-block">Submit</button>

	    </div>
	  </form>
	</div>
	<div class="container">
		<footer><p> <a href="/api/friends">API Friend List</a> | <a href="https://github.com/NeginNami/FriendFinder.git">GitHub Repo</a></p></footer>
	</div>	
	

<!-- Modal -->
<div class="modal fade" id="resultModal" tabindex="-1" role="dialog" aria-labelledby="resultModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="resultModalLabel">Best Match:</h3>
        	<h4 id="matchName"></h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <img id="resultImg" class="img-responsive">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Ok</button>
       
      </div>
    </div>
  </div>
</div>




</body>
</html>

<script type="text/javascript">
	
	$("#subbutton").on("click",function (event) {
		
		event.preventDefault();
		
		$('#matchName').empty();
		var notSelected=0;

		if ($("#usrName").val()==="" ||$("#usrPhoto").val()==="" ) {
			alert("Please fill out ur info");
		}
		

		for (var i = 1; i < 11; i++) 
			

			if ($('#q'+i+' :selected').text()==="Select one") 
				notSelected++;
			
		
		console.log(notSelected);
		if (notSelected>0) 
			alert("Please answer all the questions!");

		var info={
			name: $("#usrName").val().trim() ,
			photo: $("#usrPhoto").val().trim() ,
			scores: []
		};
		
	

		for (var i = 1; i < 11; i++) 
			info.scores.push($('#q'+i+' :selected').text().charAt()); 

		
		$.ajax({
	        type: 'POST',
	        url: "/api/friends",
	        contentType: "application/json",
	        data:JSON.stringify(info),
	        success: function (data) {

	            alert("Succeded, Your result: "+data);
	            console.log(data);

	            $('#resultImg').attr("src",data.photo);
	            $('#matchName').append(data.name);


	            $('#resultModal').modal('show');

	        }
    	});
		

	});




</script>